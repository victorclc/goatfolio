Resources:
  CorporateEventsTable:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      TableName: "CorporateEvents"
      BillingMode: PAY_PER_REQUEST
      AttributeDefinitions:
        - AttributeName: "id"
          AttributeType: "S"
        - AttributeName: "isin_code"
          AttributeType: "S"
        - AttributeName: "with_date"
          AttributeType: "S"
        - AttributeName: "type"
          AttributeType: "S"
      KeySchema:
        - AttributeName: "type"
          KeyType: "HASH"
        - AttributeName: "id"
          KeyType: "RANGE"
      LocalSecondaryIndexes:
        - IndexName: typeDateLocalIndex
          KeySchema:
            - AttributeName: "type"
              KeyType: "HASH"
            - AttributeName: "with_date"
              KeyType: "RANGE"
          Projection:
            ProjectionType: ALL
      GlobalSecondaryIndexes:
        - IndexName: isinDateGlobalIndex
          KeySchema:
            - AttributeName: "isin_code"
              KeyType: "HASH"
            - AttributeName: "with_date"
              KeyType: "RANGE"
          Projection:
            ProjectionType: ALL
  ManualCorporateEventsTable:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      TableName: "ManualCorporateEvents"
      BillingMode: PAY_PER_REQUEST
      AttributeDefinitions:
        - AttributeName: "subject"
          AttributeType: "S"
        - AttributeName: "id"
          AttributeType: "S"
        - AttributeName: "emitted_ticker"
          AttributeType: "S"
      KeySchema:
        - AttributeName: "subject"
          KeyType: "HASH"
        - AttributeName: "id"
          KeyType: "RANGE"
      GlobalSecondaryIndexes:
        - IndexName: subjectEmittedTickerGlobalIndex
          KeySchema:
            - AttributeName: "subject"
              KeyType: "HASH"
            - AttributeName: "emitted_ticker"
              KeyType: "RANGE"
          Projection:
            ProjectionType: ALL

  CashDividendsTable:
    Type: 'AWS::DynamoDB::Table'
    Properties:
      TableName: "CashDividends"
      BillingMode: PAY_PER_REQUEST
      AttributeDefinitions:
        - AttributeName: "asset_issued"
          AttributeType: "S"
        - AttributeName: "payment_date"
          AttributeType: "S"
        - AttributeName: "last_date_prior"
          AttributeType: "S"
        - AttributeName: "id"
          AttributeType: "S"
      KeySchema:
        - AttributeName: "asset_issued"
          KeyType: "HASH"
        - AttributeName: "id"
          KeyType: "RANGE"
      LocalSecondaryIndexes:
        - IndexName: assetIssueLastDatePriorLocalIndex
          KeySchema:
            - AttributeName: "asset_issued"
              KeyType: "HASH"
            - AttributeName: "last_date_prior"
              KeyType: "RANGE"
          Projection:
            ProjectionType: ALL
      GlobalSecondaryIndexes:
        - IndexName: paymentDateAssetIssuedGlobalIndex
          KeySchema:
            - AttributeName: "payment_date"
              KeyType: "HASH"
            - AttributeName: "asset_issued"
              KeyType: "RANGE"
          Projection:
            ProjectionType: ALL
